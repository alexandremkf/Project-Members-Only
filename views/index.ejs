<!DOCTYPE html>
<html>
<head>
  <title>Members Only</title>
</head>
<body>
  <h1>Members Only ğŸ•µï¸</h1>
  <p>Welcome to the clubhouse ğŸ‘€</p>

  <% if (user) { %>
    <p>OlÃ¡, <%= user.firstName %></p>

    <a href="/messages/new">Create message</a>

    <% if (!user.membershipStatus) { %>
      <a href="/join">Join the club</a>
    <% } else { %>
      <p>â­ VocÃª Ã© membro do clube</p>
    <% } %>

    <a href="/logout">Logout</a>
  <% } else { %>
    <a href="/login">Login</a>
    <a href="/signup">Signup</a>
  <% } %>

  <hr />

  <% messages.forEach(message => { %>
    <div style="border:1px solid #ccc; margin-bottom:10px; padding:10px;">
        <h3><%= message.title %></h3>
        <p><%= message.text %></p>

        <!-- MEMBRO -->
        <% if (user && user.membershipStatus) { %>
        <small>
            By <%= message.User.firstName %>
            on <%= message.createdAt.toDateString() %>
        </small>
        <% } %>

        <!-- ADMIN -->
        <% if (user && user.isAdmin) { %>
        <br />
        <small>
            ğŸ‘‘ Admin view:
            <%= message.User.firstName %> |
            <%= message.User.username %>
        </small>

        <form
            action="/messages/<%= message.id %>/delete"
            method="POST"
            style="margin-top: 5px;"
        >
            <button type="submit">ğŸ—‘ï¸ Delete</button>
        </form>
        <% } %>
    </div>
  <% }) %>
</body>
</html>